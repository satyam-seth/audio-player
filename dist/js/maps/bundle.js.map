{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bundle.js","src/ts/components/player.ts","src/ts/components/widget.ts","src/ts/main.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","__generator","body","y","_","label","sent","trys","ops","g","Object","create","Iterator","prototype","verb","Symbol","iterator","this","v","op","TypeError","pop","push","defineProperty","AudioPlayer","namespace","configure","audioSource","loop","setSource","setLoopStatus","skeleton","audio","document","createElement","id","setAttribute","isPaused","element","paused","play","err_1","_a","console","log","error","pause","err","src","load","status","toggleLoopStatus","forward","sec","currentTime","backward","seekTo","time","getCurrentTime","Math","floor","getDuration","duration","getSeekPosition","getTimeString","minutes","seconds","secondsValue","concat","getCurrentTimeString","getDurationString","getBufferedAmountPercentage","bufferedAmount","bufferedLength","buffered","end","get","enumerable","configurable","getElementById","build","parentElement","appendChild","__read","m","ar","__spreadArray","to","from","pack","arguments","l","Array","slice","AudioPlayerWidget","config","onPlay","hidePlayIcon","bind","onPause","showPlayIcon","onTimeUpdate","timeUpdateHandler","onProgress","updateBufferedAmount","onLoadedMetaData","loadedMetaDataHandler","destroy","removeAudioEventListeners","remove","querySelector","classList","add","updateDuration","innerHTML","audioPlayer","updateCurrentTime","bufferedAmountPercentage","style","setProperty","updateSeekSliderMax","max","updateSeekSlider","toString","container","className","progressContainer","controlsContainer","addAudioEventListeners","readyState","addEventListener","removeEventListener","seekSlider","timeContainer","_this","seekSliderValue","parseInt","currentTimeSpan","totalDurationSpan","span","innerText","backwardIcon","playIcon","pauseIcon","forwardIcon","getImageElement","alt","classNames","title","onClick","img","stopPropagation","playIconUrl","pauseIconUrl","forwardIconUrl","seekSec","backwardIconUrl","player_1","widget_1","window","onload","exampleSection"],"mappings":"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","file":"../bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"// eslint-disable-next-line import/prefer-default-export\nexport class AudioPlayer {\n  private namespace: string;\n\n  constructor(namespace: string = 'default') {\n    this.namespace = namespace;\n  }\n\n  configure(audioSource: string, loop: boolean = true) {\n    this.setSource(audioSource);\n    this.setLoopStatus(loop);\n  }\n\n  skeleton(): HTMLElement {\n    const audio = document.createElement('audio');\n    audio.id = this.id;\n    audio.setAttribute('preload', 'metadata');\n    return audio;\n  }\n\n  isPaused() {\n    return this.element.paused;\n  }\n\n  // will play audio\n  async play() {\n    if (this.isPaused() === false) {\n      // eslint-disable-next-line no-console\n      console.log('The audio is already playing.');\n      return;\n    }\n    try {\n      await this.element.play();\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  }\n\n  // will pause audio\n  pause() {\n    if (this.isPaused() === true) {\n      // eslint-disable-next-line no-console\n      console.log('The audio is already paused.');\n      return;\n    }\n    try {\n      this.element.pause();\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  }\n\n  // set audio src and load\n  setSource(src: string) {\n    this.element.src = src;\n    this.element.load();\n  }\n\n  // set audio loop status\n  setLoopStatus(status: boolean) {\n    this.element.loop = status;\n  }\n\n  // toggle audio loop status\n  toggleLoopStatus() {\n    const { loop } = this.element;\n    this.setLoopStatus(!loop);\n  }\n\n  // forward audio by sec\n  forward(sec: number = 5) {\n    this.element.currentTime += sec;\n  }\n\n  // backward audio by sec\n  backward(sec: number = 5) {\n    this.element.currentTime -= sec;\n  }\n\n  // seek audio at specific time\n  seekTo(time: number) {\n    this.element.currentTime = time;\n  }\n\n  // to get current time in sec\n  getCurrentTime() {\n    const { currentTime } = this.element;\n    return Math.floor(currentTime);\n  }\n\n  // to get current time in sec\n  getDuration() {\n    const { duration } = this.element;\n    return Math.floor(duration);\n  }\n\n  // to get current seek position (played / total duration * 100)\n  getSeekPosition() {\n    const duration = this.getDuration();\n    const currentTime = this.getCurrentTime();\n\n    return Math.floor((currentTime / duration) * 100);\n  }\n\n  // to get time in mm:ss format\n  // eslint-disable-next-line class-methods-use-this\n  getTimeString(time: number) {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n\n    // Add a zero to the single digit time values\n    const secondsValue = seconds < 10 ? `0${seconds}` : seconds;\n\n    return `${minutes}:${secondsValue}`;\n  }\n\n  // to get current time in mm:ss format\n  getCurrentTimeString() {\n    return this.getTimeString(this.getCurrentTime());\n  }\n\n  // to get total duration in mm:ss format\n  getDurationString() {\n    return this.getTimeString(this.getDuration());\n  }\n\n  // to get audio buffered time in percentage\n  getBufferedAmountPercentage() {\n    let bufferedAmount = 0;\n    const { duration } = this.element;\n    const bufferedLength = this.element.buffered.length;\n\n    if (bufferedLength > 0) {\n      bufferedAmount = this.element.buffered.end(bufferedLength - 1);\n    }\n\n    return Math.floor(bufferedAmount / duration) * 100;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private get id() {\n    return `${this.namespace}-audio-player`;\n  }\n\n  get element(): HTMLAudioElement {\n    return document.getElementById(this.id)! as HTMLAudioElement;\n  }\n\n  build(parentElement: HTMLElement): void {\n    parentElement.appendChild(this.skeleton());\n  }\n}\n","import { AudioPlayerWidgetConfig } from './types';\n\n// eslint-disable-next-line import/prefer-default-export\nexport class AudioPlayerWidget {\n  private config: AudioPlayerWidgetConfig;\n\n  private onPlay = this.hidePlayIcon.bind(this);\n\n  private onPause = this.showPlayIcon.bind(this);\n\n  private onTimeUpdate = this.timeUpdateHandler.bind(this);\n\n  private onProgress = this.updateBufferedAmount.bind(this);\n\n  private onLoadedMetaData = this.loadedMetaDataHandler.bind(this);\n\n  constructor(config: AudioPlayerWidgetConfig) {\n    this.config = config;\n  }\n\n  // to remove audio event listeners and remove skeleton from dom\n  destroy() {\n    this.removeAudioEventListeners();\n    this.element?.remove();\n  }\n\n  // to hide pause icon and show play icon\n  showPlayIcon() {\n    const controlsContainer = this.element.querySelector(\n      '.controls-container'\n    )!;\n    controlsContainer.classList.remove('controls-container--playing');\n  }\n\n  // to hide play icon and show pause icon\n  hidePlayIcon() {\n    const controlsContainer = this.element.querySelector(\n      '.controls-container'\n    )!;\n    controlsContainer.classList.add('controls-container--playing');\n  }\n\n  // to update audio total duration info\n  updateDuration() {\n    const totalDuration = this.element.querySelector('.total-duration')!;\n    totalDuration.innerHTML = this.config.audioPlayer.getDurationString();\n  }\n\n  // to update audio current time(total played time) info\n  updateCurrentTime() {\n    const currentTime = this.element.querySelector('.current-time')!;\n    currentTime.innerHTML = this.config.audioPlayer.getCurrentTimeString();\n  }\n\n  /**\n   *\n   * Update '--buffered-width' css property which is use to show buffered time\n   * seek input range track background: linear-gradient(\n   *       to right,\n   *      rgba(128, 128, 128, 0.6) var(--buffered-width),\n   *      rgba(128, 128, 128, 0.2) var(--buffered-width)\n   *      );\n   *\n   */\n  updateBufferedAmount() {\n    const bufferedAmountPercentage =\n      this.config.audioPlayer.getBufferedAmountPercentage();\n\n    this.element.style.setProperty(\n      '--buffered-width',\n      `${bufferedAmountPercentage}%`\n    );\n  }\n\n  // to update seek input range element max attribute value\n  updateSeekSliderMax() {\n    const seekSlider = this.element.querySelector(\n      'input.seek-slider'\n    ) as HTMLInputElement;\n    seekSlider.max = `${this.config.audioPlayer.getDuration()}`;\n  }\n\n  /**\n   *\n   * to update seek input range element value and\n   * update '--seek-before-width' css property\n   * which is use to indicate played time\n   *\n   */\n  updateSeekSlider() {\n    const currentTime = this.config.audioPlayer.getCurrentTime();\n\n    const seekSlider = this.element.querySelector(\n      'input.seek-slider'\n    ) as HTMLInputElement;\n\n    // update slider range value\n    seekSlider.value = currentTime.toString();\n\n    // update slider before width\n    this.element.style.setProperty(\n      '--seek-before-width',\n      `${this.config.audioPlayer.getSeekPosition()}%`\n    );\n  }\n\n  // on audio metadata load\n  loadedMetaDataHandler() {\n    this.updateDuration();\n    this.updateSeekSliderMax();\n    this.updateBufferedAmount();\n  }\n\n  // on audio playback time update\n  timeUpdateHandler() {\n    this.updateCurrentTime();\n    this.updateSeekSlider();\n  }\n\n  skeleton(): HTMLElement {\n    const container = document.createElement('div');\n    container.id = this.id;\n    container.className = 'audio-player-widget';\n    container.appendChild(this.progressContainer);\n    container.appendChild(this.controlsContainer);\n    return container;\n  }\n\n  addAudioEventListeners() {\n    // More often than not, the browser loads the audio faster than usual.\n    // When this happens, the loadedmetadata event is fired before its listener\n    // can be added to the <audio> element. Therefore, the audio duration is not\n    // displayed on the browser. Nevertheless, there’s a hack. The HTMLMediaElement\n    // has a property called readyState.\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/readyState\n    if (this.config.audioPlayer.element.readyState > 0) {\n      this.loadedMetaDataHandler();\n    } else {\n      this.config.audioPlayer.element.addEventListener(\n        'loadedmetadata',\n        this.onLoadedMetaData\n      );\n    }\n\n    // add play event listener to update state once\n    // audio is played (from system notification or our ui)\n    this.config.audioPlayer.element.addEventListener('play', this.onPlay);\n\n    // add pause event listener to update state once\n    // audio is paused (from system notification or our ui)\n    this.config.audioPlayer.element.addEventListener('pause', this.onPause);\n\n    // add timeupdate event listener to update current time (played time) info\n    this.config.audioPlayer.element.addEventListener(\n      'timeupdate',\n      this.onTimeUpdate\n    );\n\n    // add progress event listener to update buffer time info\n    this.config.audioPlayer.element.addEventListener(\n      'progress',\n      this.onProgress\n    );\n  }\n\n  removeAudioEventListeners() {\n    // remove metadata load event listener\n    this.config.audioPlayer.element.removeEventListener(\n      'loadedmetadata',\n      this.onLoadedMetaData\n    );\n\n    // remove play event listener to update state once\n    // audio is played (from system notification or our ui)\n    this.config.audioPlayer.element.removeEventListener('play', this.onPlay);\n\n    // remove pause event listener to update state once\n    // audio is paused (from system notification or our ui)\n    this.config.audioPlayer.element.removeEventListener('pause', this.onPause);\n\n    // remove timeupdate event listener to update current time (played time) info\n    this.config.audioPlayer.element.removeEventListener(\n      'timeupdate',\n      this.onTimeUpdate\n    );\n\n    // remove progress event listener to update buffer time info\n    this.config.audioPlayer.element.removeEventListener(\n      'progress',\n      this.onProgress\n    );\n  }\n\n  /**\n   *\n   * Progress Container contains\n   * 1) progress seek input range element\n   * 2) time container (played and total duration)\n   *\n   */\n  get progressContainer() {\n    const progressContainer = document.createElement('div');\n    progressContainer.className = 'progress-container';\n    progressContainer.appendChild(this.seekSlider);\n    progressContainer.appendChild(this.timeContainer);\n    return progressContainer;\n  }\n\n  /**\n   *\n   * Input range Html Element to showcase\n   * audio playback progress and seek audio\n   *\n   */\n  // eslint-disable-next-line class-methods-use-this\n  get seekSlider() {\n    const seekSlider = document.createElement('input');\n    seekSlider.className = 'seek-slider';\n    seekSlider.setAttribute('type', 'range');\n    seekSlider.setAttribute('min', '0');\n    seekSlider.setAttribute('max', '100');\n    seekSlider.setAttribute('value', '0');\n\n    // add input event listener\n    seekSlider.addEventListener('input', () => {\n      const seekSliderValue = seekSlider.value;\n      this.config.audioPlayer.seekTo(parseInt(seekSliderValue, 10));\n    });\n\n    return seekSlider;\n  }\n\n  /**\n   *\n   * Time container contains\n   * 1) total played time\n   * 2) total audio duration\n   *\n   */\n  // eslint-disable-next-line class-methods-use-this\n  get timeContainer() {\n    const timeContainer = document.createElement('div');\n    timeContainer.className = 'time-container';\n    timeContainer.appendChild(this.currentTimeSpan);\n    timeContainer.appendChild(this.totalDurationSpan);\n    return timeContainer;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  get currentTimeSpan() {\n    const span = document.createElement('span');\n    span.className = 'current-time';\n    span.innerText = '00:00';\n    return span;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  get totalDurationSpan() {\n    const span = document.createElement('span');\n    span.className = 'total-duration';\n    span.innerText = '00:00';\n    return span;\n  }\n\n  /**\n   *\n   * Controller container contains\n   * 1) Backward Icon\n   * 2) Play Icon\n   * 3) Pause Icon\n   * 4) Forward Icon\n   *\n   */\n  get controlsContainer() {\n    const controlsContainer = document.createElement('div');\n    controlsContainer.className = 'controls-container';\n    controlsContainer.appendChild(this.backwardIcon);\n    controlsContainer.appendChild(this.playIcon);\n    controlsContainer.appendChild(this.pauseIcon);\n    controlsContainer.appendChild(this.forwardIcon);\n    return controlsContainer;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getImageElement(\n    src: string,\n    alt: string,\n    classNames: string[],\n    title: string,\n    onClick: () => void\n  ) {\n    const img = document.createElement('img');\n    img.src = src;\n    img.alt = alt;\n    img.classList.add(...classNames);\n    img.setAttribute('title', title);\n\n    // add click event listener\n    img.addEventListener('click', (e: any) => {\n      e.stopPropagation();\n      onClick();\n    });\n\n    return img;\n  }\n\n  // play icon\n  get playIcon() {\n    return this.getImageElement(\n      this.config.playIconUrl,\n      'play',\n      ['control-icon', 'play'],\n      'play',\n      () => this.config.audioPlayer.play()\n    );\n  }\n\n  // pause icon\n  get pauseIcon() {\n    return this.getImageElement(\n      this.config.pauseIconUrl,\n      'pause',\n      ['control-icon', 'pause'],\n      'pause',\n      () => this.config.audioPlayer.pause()\n    );\n  }\n\n  // forward icon\n  get forwardIcon() {\n    return this.getImageElement(\n      this.config.forwardIconUrl,\n      'forward',\n      ['control-icon', 'forward'],\n      'forward',\n      () => this.config.audioPlayer.forward(this.config.seekSec)\n    );\n  }\n\n  // backward icon\n  get backwardIcon() {\n    return this.getImageElement(\n      this.config.backwardIconUrl,\n      'backward',\n      ['control-icon', 'backward'],\n      'backward',\n      () => this.config.audioPlayer.backward(this.config.seekSec)\n    );\n  }\n\n  get id() {\n    return `${this.config.namespace}-audio-player-widget`;\n  }\n\n  get element(): HTMLElement {\n    return document.getElementById(this.id)! as HTMLElement;\n  }\n\n  build(parentElement: HTMLElement): void {\n    parentElement.appendChild(this.skeleton());\n\n    // add event linters\n    this.addAudioEventListeners();\n  }\n}\n","import { AudioPlayer } from './components/player';\nimport { AudioPlayerWidget } from './components/widget';\n\nwindow.onload = () => {\n  const exampleSection =\n    document.querySelector<HTMLElement>('section.example')!;\n  const audioPlayer = new AudioPlayer();\n  audioPlayer.build(exampleSection);\n  audioPlayer.setSource(\n    'https://commondatastorage.googleapis.com/codeskulptor-demos/DDR_assets/Kangaroo_MusiQue_-_The_Neverwritten_Role_Playing_Game.mp3'\n  );\n  const audioPlayerWidget = new AudioPlayerWidget({\n    namespace: 'example',\n    audioPlayer,\n    seekSec: 15,\n    playIconUrl: './assets/play.svg',\n    pauseIconUrl: './assets/pause.svg',\n    forwardIconUrl: './assets/forward.svg',\n    backwardIconUrl: './assets/backward.svg',\n  });\n  audioPlayerWidget.build(exampleSection);\n};\n"]}